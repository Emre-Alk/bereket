<!-- TODO: review the design maybe use a table element. see if can DRY with a partial withing a table (a pdf btn is needed)-->

<div class="bg-white flex flex-col min-h-24 gap-2 divide-y divide-black/30 rounded-lg p-2 overflow-y-auto shadow-[0_0_12px_1px_rgba(0,0,0,0.1)] shadow-black/10">
  <% @donations.each do |don| %>
    <% if current_user.donator? %>
      <div class="bg-white flex flex-row px-2 pt-2 items-center gap-x-5">

        <div class="flex flex-auto flex-row items-center gap-4 w-3/4">
          <div class="bg-white">
            <%= image_tag( don.place.place_image.attached? ? don.asso.profile_image : "default_avatar.png" , class:'size-14 rounded-full')  %>
          </div>

          <div class="bg-white flex flex-col justify-evenly roboto-medium text-sm">
              <p><%= don.place.name %></p>
              <p><%= don.amount / 100.00 %> €</p>
              <p class="roboto-regular text-sm">Le <%= don.occured_on.strftime("%d/%m/%Y") %></p>
          </div>
        </div>


        <div data-controller="pdf-generate" data-pdf-generate-don-id-value="<%= don.id %>" data-pdf-generate-donator-id-value="<%= @donator.id %>" class="flex-none">
          <button data-action="click->pdf-generate#generate" data-pdf-generate-target="btn" class="bg-neutral-100 text-black px-3 py-2 rounded-lg">
            Reçu Fiscal
          </button>
          <!--
            <%= link_to "Reçu Fiscal", pdf_preview_path(id: don.id), class: "bg-neutral-100 text-black px-3 py-2 rounded-lg" %>
          -->
        </div>

      </div>

    <% else %>
      <div class="bg-white flex flex-row px-2 pt-2 items-center">

        <div class="flex flex-row items-center gap-4 w-full">
          <div class="bg-white">
              <%= image_tag( don.donator.profile_image.attached? ? don.donator.profile_image : "default_avatar.png" , class:'size-14 rounded-full')  %>
          </div>

          <div class="bg-white flex flex-col justify-evenly roboto-medium text-sm">
            <p><%= don.donator.first_name %> <%= don.donator.last_name %></p>
            <p><%= don.amount / 100.00 %> €</p>
            <p class="roboto-regular text-sm">Le <%= don.occured_on.strftime("%d/%m/%Y") %></p>
          </div>
        </div>

      </div>
    <% end %>


  <% end %>



</div>
