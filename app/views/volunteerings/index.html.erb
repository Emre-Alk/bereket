<div class="space-y-8" data-controller="volunteering">
  <% @volunteerings.each do |v| %>
    <!-- put it into a host place partial -->
    <% if !v.status_archived? %>
      <div data-action="click->volunteering#setAction" data-volunteering-payload-param="<%= v.to_json %>" data-volunteering-url-param="<%= volunteering_path(v.id)%>" >
        <%# place card %>
        <div class="relative rounded-lg w-full shadow-[0_0_12px_1px_rgba(0,0,0,0.1)]">
          <%# status %>
          <% case v.status %>
            <% when 'pending' %>
            <span class="absolute top-2 left-2 bg-yellow-100 text-amber-500 rounded-lg px-3 py-1.5"><%= I18n.t("wording.#{v.status}")%></span>
            <% when 'active' %>
            <span class="absolute top-2 left-2 bg-green-200 text-green-500 rounded-lg px-3 py-1.5"><%= I18n.t("wording.#{v.status}")%></span>
          <% end %>

          <%# bin %>
          <div class="absolute top-2 right-2 bg-white text-black rounded-full size-9 px-3 py-1.5 flex justify-center items-center">
            <span><%= svg_tag('bin', class:"size-5") %></span>
          </div>

          <%# image %>
          <div>
            <% if v.host_place.place_image.attached? %>
              <div class=" flex justify-center items-center h-28 w-full">
                  <%= cl_image_tag(v.host_place.place_image.key, crop: 'fill', class:'h-28 w-full rounded-t-lg') %>
              </div>
            <% else %>
              <div class="flex justify-center items-center h-28 w-full rounded-t-lg bg-gray-300">
                <%= svg_tag('image_empty', class:'size-20 bg-inherit text-gray-200') %>
              </div>
            <% end %>
          </div>

          <%# quick recap %>
          <div class="relative text-sm flex flex-col gap-y-1 bg-white p-2">

            <div class="flex flex-row gap-4 items-baseline">
              <%= icon("fa-solid", "paper-plane") %>
              <%= v.host_place.name.titleize %>
            </div>

            <div class="flex flex-row gap-4 items-baseline">
              <%= icon("fa-solid", "location-dot") %>
              <%= v.host_place.street_no %> <%= v.host_place.address %>, <%= v.host_place.city %> <%= v.host_place.zip_code %>, <%= v.host_place.country %>
            </div>

          </div>

          <%# quick stats %>
          <div class="flex flex-row justify-between items-center p-2 rounded-b-lg bg-black text-white text-sm">
            <%# nbre dons %>
            <div class="space-x-2">
              <%= icon("fa-solid", "gift") %>
              <span class="inline-flex"><%=v.host_place.donations.count%> <%= v.host_place.donations.count <= 1 ? 'don collecté' : 'dons collectés'%></span>
            </div>
          </div>

        </div>
      </div>
    <% end %>

  <% end %>

  <%# filter modal %>
  <div class="fixed inset-0 -z-10"
      data-volunteering-target="filter"
      data-action="click->volunteering#toggleModal"></div>

  <%# modal %>
  <%= render partial: 'volunteerings/actions' %>



</div>
